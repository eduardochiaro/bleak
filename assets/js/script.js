jQuery(function(a){function t(a){u?(a.removeClass("active"),c.removeClass("menu-active"),setTimeout(function(){a.removeClass("initial"),c.removeClass("menu-initial")},300),u=!1):(c.addClass("menu-initial"),a.addClass("initial"),setTimeout(function(){c.addClass("menu-active"),a.addClass("active")},1),u=!0)}function e(){a(".menu-list-item a").each(function(){var t=a(this);t.removeClass("current"),t.attr("href")==window.location.href&&t.addClass("current")})}function s(){a(".post-list .post .post-image img").each(function(){var t=a(this);t.load(function(){t.parents(".post-image").css({height:"0","padding-bottom":100/t.width()*t.height()+"%"})})});var t=a(".post-list").masonry({itemSelector:".post",isAnimated:!1,gutter:0,columnWidth:1,transitionDuration:0}).imagesLoaded().always(function(){t.masonry("layout")})}function n(){a("pre code").each(function(t,e){hljs.highlightBlock(e);var s=a(this),n=s.html().split(/\n/).length,i=[];for(t=1;n>t;t++)i+='<span class="line">'+t+"</span>";s.parent().addClass("codeblock").append('<div class="lines">'+i+"</div>")})}function i(){a("#wrapper").fitVids()}function o(){if("undefined"!=typeof disqus&&document.getElementById("disqus_thread")){if(window.DISQUS)return DISQUS.reset({reload:!0,config:function(){this.page.identifier=location.pathname,this.page.url=location.origin+location.pathname}});a.ajax({type:"GET",url:"//"+disqus+".disqus.com/embed.js",dataType:"script",cache:!0})}else a(".post-comments").css({display:"none"})}function r(){if("/"!==location.pathname){var a=h.find("article"),t=a.find(".post-reading-time");a.readingTime({readingTimeTarget:t.find(".estimated-reading-time"),wordCountTarget:t.find(".word-count"),error:function(){t.find(".post-reading-time").remove()}})}}function d(){s(),l(),n(),i(),o(),e(),r()}function l(){a('a[href^="'+window.location.origin+'"], .post-image a, .post-title a, .post-more a, .post-meta a, .post-tags a, #pagination a').each(function(){var t=a(this);t.hasClass("rss")||(t.addClass("js-ajax-link"),t.attr("href").indexOf("page")>-1&&t.addClass("js-archive-index"),t.attr("href")==window.location.origin&&t.addClass("js-show-index"),t.attr("href").indexOf("tag")>-1&&t.addClass("js-tag-index"),t.attr("href").indexOf("author")>-1&&t.addClass("js-author-index"))})}var c=a("html"),h=a("body");h.on("click",'[data-action="menu"]',function(){var e=(a(this).data("action"),a('[data-target="'+a(this).data("target")+'"]').not("[data-action]"));t(e)});var u=!1;h.on("click",".overlay, #menu a",function(){if(c.hasClass("menu-active")){var e=a('[data-target="menu"]').not("[data-action]");t(e)}}),e(),s(),n(),i(),o(),r(),l();var p=window.History,m=!1,f=a("#ajax-container");return p.enabled?(p.Adapter.bind(window,"statechange",function(){c.addClass("loading");var t=p.getState();a.get(t.url,function(t){var e=a(t),s=a("#ajax-container",e).contents(),n=t.match(/<title>(.*?)<\/title>/)[1];f.fadeOut(500,function(){c.hasClass("push-next")&&(c.removeClass("push-next"),c.addClass("pushed-next")),c.hasClass("push-prev")&&(c.removeClass("push-prev"),c.addClass("pushed-prev")),document.title=a("<textarea/>").html(n).text(),f.html(s),h.removeClass(),h.addClass(a("#body-class").attr("class")),NProgress.done(),f.fadeIn(500),a(document).scrollTop(0),setTimeout(function(){c.removeClass("loading")},50),d(),m=!1})})}),a("body").on("click",".js-ajax-link",function(t){t.preventDefault();var e=a(this);if(e.hasClass("post-nav-item")||e.hasClass("pagination-item")?((e.hasClass("post-nav-next")||e.hasClass("pagination-next"))&&(c.removeClass("pushed-prev"),c.addClass("push-next")),(e.hasClass("post-nav-prev")||e.hasClass("pagination-prev"))&&(c.removeClass("pushed-next"),c.addClass("push-prev"))):(c.removeClass("pushed-next"),c.removeClass("pushed-prev")),m===!1){var s=p.getState(),n=a(this).prop("href"),i=a(this).attr("title")||null;n.replace(/\/$/,"")!==s.url.replace(/\/$/,"")&&(m=!0,c.addClass("loading"),NProgress.start(),p.pushState({},i,n))}}),a("body").on("click","#post-index .post .js-ajax-link",function(){var t=a(this).parents(".post");t.addClass("initial"),setTimeout(function(){t.addClass("active")},1)}),void a("body").on("click",'a[href*="#"]:not([href="#"])',function(t){if(t.preventDefault(),location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=a(this.hash);if(e=e.length?e:a("[name="+this.hash.slice(1)+"]"),e.length)return a("html, body").animate({scrollTop:e.offset().top},1e3),!1}})):!1});